story_description: 修改机器学习任务
server: ml
model: MachineLearning
switch: false
request:
  method: put
  url_path: /ml/${MLID}$/update
body:
  action:
    emails: []
    type: ''
  algorithm: sigma
  condition: ''
  description: 机器学习任务
  level: 0
  monitor:
    searchId: aa
  name: 单维度异常检测修改${AnyRobotNameID}$
  notify: ''
  savedSearchId: 28df455d-f248-1c99-d9d6-63b4f532797c
  savedSearchName: AS访问日志
  scene: 异常检测
  schedule:
    rangeUnit: s
    startDateTime: ''
    timeInterval: ''
    timeLabel: last5Years
    timeRange: constant
    timeUnit: ''
    type: interval
  search:
    filters:
      must:
      - '@timestamp':
          from: 1427868506416
          to: 1585721306416
      - arPort: 20089
      must_not: []
    fit: '*|outlier sigma(FF_日志等级.keyword_count) method=std para=1 windows=1 as result
      by 3'
    logGroup: fe5b7f96-443a-11e7-a467-000c29253e90
    needFieldList: false
    outline: transform field(日志等级.keyword_count) by 3|distribution normal(日志等级.keyword_count)
      by 3
    preprocess: '*|preprocessing fillna(default_all) value=(avg) by 3'
    query: "*|bucket datehistorgram(@timestamp) interval=1m timezone='Asia/Shanghai'\
      \ mindoccount=1 as 3|stats count(日志等级.keyword) as 日志等级.keyword_count by 3"
    size: 0
    sort:
    - '@timestamp': desc
  status: 1
  taskType: single
testcases:
  TestCase1:
    Description: 正常场景:修改单维度异常检测任务名称
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase2:
    Description: 正常场景:修改单维度异常检测任务告警级别:重要
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase3:
    Description: 正常场景:修改单维度异常检测任务告警级别:普通
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase4:
    Description: 修改单维度异常检测任务状态:禁用
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase5:
    Description: 异常场景:修改单维度异常检测任务不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase6:
    Description: 异常场景:修改单维度异常检测任务名称已存在同名
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase7:
    Description: 正常场景:修改多维度异常检测任务名称
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase8:
    Description: 正常场景:修改多维度异常检测任务告警级别:重要
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase9:
    Description: 正常场景:修改多维度异常检测任务告警级别:普通
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase10:
    Description: 修改多维度异常检测任务状态:禁用
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase11:
    Description: 异常场景:修改多维度异常检测任务不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase12:
    Description: 异常场景:修改多维度异常检测任务名称已存在同名
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase13:
    Description: 正常场景:修改时间序列预测任务名称
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase14:
    Description: 正常场景:修改时间序列预测任务告警级别:重要
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase15:
    Description: 正常场景:修改时间序列预测任务告警级别:普通
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase16:
    Description: 修改时间序列预测任务状态:禁用
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase17:
    Description: 异常场景:修改时间序列预测任务不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase18:
    Description: 异常场景:修改时间序列预测任务名称已存在同名
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase19:
    Description: 正常场景:修改根因分析任务名称
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase20:
    Description: 正常场景:修改根因分析任务告警级别:重要
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase21:
    Description: 正常场景:修改根因分析任务告警级别:普通
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase22:
    Description: 修改根因分析任务状态:禁用
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase23:
    Description: 异常场景:修改根因分析任务不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase24:
    Description: 异常场景:修改根因分析任务名称已存在同名
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200
