story_description: 添加DBIO服务配置
server: dbio
model: serviceManager
switch: false
request:
  method: post
  url_path: /manager/api/v1/dbio/serviceManager/service
body:
  serviceName: 创建服务${AnyRobotNameID}$
  serviceLabels:
  - test
  serviceLabelsID:
  - 1
  entityInfo:
    ruleCondition:
    - - ruleType: tags
        key: tag
        vlaue: linux
        operation: matches
    matchEntity:
    - tags:
      - A
      - B
      - D
      entityName: 实体3
      fieldsCondition:
        index: web
        host: 192.168.84.35
      entityDescription: 实体描述
      entityGroup: 分组
      entityId: 19
  kpiImportance:
  - kpiName: CPU使用率
    serviceName: 服务-A1
    importance: 6
  kpiInfo:
  - kpiName: CPU使用率
    kpiDesc: KPI描述
    dataSource:
      type: saved
      value: tag=index
    kpiCalculate:
      thresholdField: host
      entityCalculate: avg
      aggrCalculate: avg
      calculateTime:
        timeInterval: 1
        timeUnit: m
      scheduleTime:
        timeInterval: 1
        timeUnit: m
      dataGap:
        value: 0
        level: 0
    dataSettings:
      unit: GB
      backFill:
        status: 1
        value: 7
    thresholdSettings:
      type: static
      value:
      - max: 100
        min: 80
        level: 6
      - max: 80
        min: 60
        level: 5
  kpiSettings: ''
  
testcases:
  TestCase1:
    Description: '正常场景:一个kpi重要性设置'
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase2:
    Description: '正常场景:多个KPI重要性设置'
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase3:
    Description: '异常场景:kpiName=null'
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase4:
    Description: '正常情况:kpiName=""'
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase5:
    Description: '异常场景:kpiName=6'
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase6:
    Description: 正常场景:kpiName="'"
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase7:
    Description: 正常场景:kpiName=@#$
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase8:
    Description: 正常场景:kpiName=\
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase9:
    Description: 正常场景:kpiName=/
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase10:
    Description: 异常场景:kpiName=zzz111 (不存在)
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase11:
    Description: 异常场景:kpiName长度过长
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase12:
    Description: 异常场景:kpiName不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase13:
    Description: 异常场景:serviceName=null
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase14:
    Description: 正常场景:serviceName=""
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase15:
    Description: 异常场景:serviceName=6
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase16:
    Description: 异常场景:serviceName=[]
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase17:
    Description: 异常场景:serviceName='
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase18:
    Description: 正常场景:serviceName=@#$
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase19:
    Description: 异常场景:serviceName=/
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase20:
    Description: 异常场景:serviceName=\
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase21:
    Description: 异常场景:不存在的serviceName
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase22:
    Description: 异常场景:seviceName字段不存在
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase23:
    Description: 异常场景:importance=string
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase24:
    Description: 异常场景:importance=null
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase25:
    Description: 异常场景:importance=[]
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase26:
    Description: 异常场景:importance=-5
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase27:
    Description: 异常场景:importance=5.6
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase28:
    Description: 异常场景:importance=-5.6
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase29:
    Description: 异常场景:importance=0
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase30:
    Description: 正常场景:importance=1
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase31:
    Description: 正常场景:importance=11
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200

  TestCase32:
    Description: 异常场景:importance=12
    req_body: ''
    runflag: true
    verify:
      AssertType: 0
      value: 200
