story_description: 添加一个日志分组
server: ar_manager
model: LogGroup
switch: true
transaction: logGroupIndex
request:
  method: POST
  url_path: /manager/loggroup?operate=create
  header:
    user: ${UserID}$
body:
  description: AnyRobot的相关日志
  filters:
    host:
      - negative: 0
        type: 0
        value: ${logGroupHostIp}$
    type:
      - negative: 0
        type: 0
        value: ${logGroupDataType}$
    tags:
      - negative: 0
        type: 0
        value: ${logGroupHostTags}$
    logWareHouse: ${logGroupId}$
    advance: ''
  groupName: GitLab日志分组_${AnyRobotNameID}$
  parentGroupId: ''

testcases:
  TestCase1:
    Description: 正常场景:新建一个日志分组成功
    req_body: ''
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: true

  TestCase2:
    Description: 异常场景:新建一个日志分组成功,创建当前日志库下主机不存在
    req_body:
      host:
        - negative: 0
          type: 0
          value: ${IpVR}$
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase3:
    Description: 异常场景:新建一个日志分组成功,创建当前日志库下日志库类型type参数不存在
    req_body:
      type:
        - negative: 0
          type: 0
          value: GitLab
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase4:
    Description: 异常场景:新建一个日志分组成功,创建当前日志库下logWareHouse参数为空
    req_body:
      logWareHouse:
        - '*'
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase5:
    Description: 异常场景:新建一个日志分组成功,logWareHouse参数不存在
    req_body:
      logWareHouse:
        - z1ymN1234
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase6:
    Description: 异常场景:新建一个日志分组成功,parentGroupId参数不存在
    req_body:
      parentGroupId:
        - ${UUid}$
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase7:
    Description: 正常场景:新建一个parentGroupId日志分组
    req_body:
      parentGroupId:
        - ${LogGroupIdPare}$
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: true

  TestCase8:
    Description: 异常场景:新建一个日志分组,parentGroupId参数类型错误
    req_body:
      parentGroupId: ${LogGroupIdPare}$
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false

  TestCase9:
    Description: 异常场景:新建一个日志分组,host参数中type类型错误
    req_body:
      host:
        - negative: 0
          type: 3
          value: ''
    runflag: true
    verify:
      AssertType: 2
      key: groupId
      value: false