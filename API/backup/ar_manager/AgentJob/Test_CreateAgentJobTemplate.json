{"story_description": "添加Agent任务模板", "server": "ar_manager", "model": "AgentJob", "switch": true, "request": {"method": "post", "url_path": "/manager/agents/job/template", "header": {"user": "${UserID}$"}}, "body": {"name": "GitLab服务器日志收集任务模板${AnyRobotNameID}$", "tagsID": [2, 3], "tags": ["MySQL", "DB2"], "agent": "Filebeat", "category": "FileCollect", "schedule": {"type": "interval", "intervalTime": "10s", "period": "day", "days": 1, "startTime": "00:00"}, "configInputTemplateIds": ["${InputTemplateID}$"], "configOutputTemplateIds": ["${OutTemplateID}$"], "configGroupIds": ["${GroupID}$"], "configHostIds": [], "description": "GitLab服务器日志收集任务模板"}, "testcases": {"TestCase1": {"Description": "正常场景Filebeat:添加Agent任务模板", "req_body": "", "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": true}}, "TestCase2": {"Description": "异常场景Filebeat:添加Agent任务模板,tagsID参数错误", "req_body": {"tagsID": [23, 12]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase3": {"Description": "异常场景Filebeat:添加Agent任务模板,tagsID参数为空", "req_body": {"tagsID": []}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase4": {"Description": "异常场景Filebeat:添加Agent任务模板,tagsID参数类型错误", "req_body": {"tagsID": 12}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase5": {"Description": "异常场景Filebeat:添加Agent任务模板,tags参数类型错误", "req_body": {"tags": "Oracle"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase6": {"Description": "异常场景Filebeat:添加Agent任务模板,tags参数为空", "req_body": {"tags": []}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase7": {"Description": "异常场景Filebeat:添加Agent任务模板,tags参数错误", "req_body": {"tags": ["Oracle123", "Mysql123"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase8": {"Description": "异常场景Filebeat:添加Agent任务模板,agent参数错误", "req_body": {"agent": "Filebeat123"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase9": {"Description": "异常场景Filebeat:添加Agent任务模板,agent参数为空", "req_body": {"agent": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase10": {"Description": "异常场景Filebeat:添加Agent任务模板,category参数为空", "req_body": {"category": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase11": {"Description": "异常场景Filebeat:添加Agent任务模板,category参数错误", "req_body": {"category": "FileCollect123"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase12": {"Description": "异常场景Filebeat:添加Agent任务模板,intervalTime参数错误", "req_body": {"intervalTime": "abc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase13": {"Description": "异常场景Filebeat:添加Agent任务模板,intervalTime参数为空", "req_body": {"intervalTime": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase14": {"Description": "异常场景Filebeat:添加Agent任务模板,intervalTime参数缺少单位", "req_body": {"intervalTime": 10}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase15": {"Description": "异常场景Filebeat:添加Agent任务模板,type参数错误", "req_body": {"type": "abc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase16": {"Description": "异常场景Filebeat:添加Agent任务模板,type参数为空", "req_body": {"type": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase17": {"Description": "异常场景Filebeat:添加Agent任务模板,period参数为空", "req_body": {"period": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase18": {"Description": "异常场景Filebeat:添加Agent任务模板,period参数错误", "req_body": {"period": "abc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase19": {"Description": "异常场景Filebeat:添加Agent任务模板,startTime时间参数错误", "req_body": {"startTime": "50:50"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase20": {"Description": "异常场景Filebeat:添加Agent任务模板,startTime时间参数错误", "req_body": {"startTime": "abc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase21": {"Description": "异常场景Filebeat:添加Agent任务模板,startTime时间参数为空", "req_body": {"startTime": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase22": {"Description": "异常场景Filebeat:添加Agent任务模板,nfigInputTemplateIds输入模板类型不存在", "req_body": {"nfigInputTemplateIds": ["${UUid}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase23": {"Description": "异常场景Filebeat:添加Agent任务模板,nfigInputTemplateIds输入模板类型选择是输出模板类型", "req_body": {"nfigInputTemplateIds": ["${OutTemplateID}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase24": {"Description": "异常场景Filebeat:添加Agent任务模板,nfigInputTemplateIds输入模板类型为空", "req_body": {"nfigInputTemplateIds": []}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase25": {"Description": "异常场景Filebeat:添加Agent任务模板,nfigInputTemplateIds输入模板参数类型错误", "req_body": {"nfigInputTemplateIds": "${InputTemplateID}$"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase26": {"Description": "异常场景Filebeat:添加Agent任务模板,configOutputTemplateIds输入模板参数类型错误", "req_body": {"configOutputTemplateIds": "${OutTemplateID}$"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase27": {"Description": "异常场景Filebeat:添加Agent任务模板,configOutputTemplateIds输入模板参数类型错误", "req_body": {"configOutputTemplateIds": "${OutTemplateID}$"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase28": {"Description": "异常场景Filebeat:添加Agent任务模板,nfigInputTemplateIds输入模板类型为空", "req_body": {"configOutputTemplateIds": []}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase29": {"Description": "异常场景Filebeat:添加Agent任务模板,configOutputTemplateIds输出模板类型选择是输如入板类型", "req_body": {"configOutputTemplateIds": ["${InputTemplateID}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase30": {"Description": "异常场景Filebeat:添加Agent任务模板,configOutputTemplateIds输出模板不存在", "req_body": {"configOutputTemplateIds": ["${UUid}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase31": {"Description": "异常场景Filebeat:添加Agent任务模板,configGroupIds参数不存在", "req_body": {"configGroupIds": ["${UUid}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase32": {"Description": "异常场景Filebeat:添加Agent任务模板,configGroupIds参数类型错误", "req_body": {"configGroupIds": "${GroupID}$"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase33": {"Description": "异常场景Filebeat:添加Agent任务模板,configHostIds参数类型错误", "req_body": {"configHostIds": "${HostID}$"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase34": {"Description": "异常场景Filebeat:添加Agent任务模板,configHostIds参数不存在", "req_body": {"configHostIds": ["${HostID}$"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase35": {"Description": "异常场景AR-Agent:添加Agent任务模板,days参数类型错误", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "1abc", "startTime": "00:00", "endTime": "02:00"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase36": {"Description": "异常场景AR-Agent:添加Agent任务模板,days参数为空", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "00:00", "endTime": "02:00"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase37": {"Description": "异常场景AR-Agent:添加Agent任务模板,startTime时间格式错误", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "100:100", "endTime": "02:00"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase38": {"Description": "异常场景AR-Agent:添加Agent任务模板,endTime时间格式错误", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "00:00", "endTime": "100:100"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase39": {"Description": "异常场景AR-Agent:添加Agent任务模板,endTime时间为空", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "00:00", "endTime": ""}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase40": {"Description": "异常场景AR-Agent:添加Agent任务模板,startTime时间为空", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "", "endTime": "00:00"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase41": {"Description": "异常场景AR-Agent:添加Agent任务模板,startTime时间晚于结束时间", "req_body": {"agent": "AR-Agent", "schedule": {"type": "timequantum", "intervalTime": "10s", "period": "day", "days": "", "startTime": "02:00", "endTime": "01:00"}}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}}}