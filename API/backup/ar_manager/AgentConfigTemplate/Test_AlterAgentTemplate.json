{"model": "AgentConfigTemplate", "request": {"method": "put", "url_path": "/manager/agents/config/template/${TemplateID}$"}, "server": "ar_manager", "story_description": "修改Agent模板", "switch": true, "body": {"agent": "AR-Agent", "category": "input", "config": {"cleanDeadEnable": true, "cleanDeadTime": 30, "deadTime": 24, "encoding": "utf-8", "fields": "", "maxLineByte": 1024, "multiline": false, "multiline.match": "after", "multiline.negate": false, "multiline.pattern": "", "paths": [{"path": "/root/log/ab.log", "type": "collect"}], "tags": ["MySQL", "SQLServer"], "tagsID": [2, 4], "tail": false, "type": "test"}, "createTime": 1588900662000, "deleteAble": true, "description": "Apache日志文件采集的相关配置", "id": "${TemplateID}$", "latestUpdateTime": 1588900662000, "name": "Linux日志采集${AnyRobotNameID}$", "version": "b3121187f581eb3d74b5aaaf30d174e6"}, "testcases": {"TestCase1": {"Description": "正常场景:修改Agent配置模板,修改模板用户名和日志路径", "req_body": "", "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "name", "value": true, "db": "AgentConfigTemplate,name"}}, "TestCase10": {"Description": "异常场景:修改Agent配置模板,日志限制大小参数maxLineByte为空", "isOperationDb": "", "req_body": {"maxLineByte": ""}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "maxLineByte", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase10-1": {"Description": "异常场景:修改Agent配置模板,日志限制大小参数maxLineBytefe非法", "isOperationDb": "", "req_body": {"maxLineByte": "abcd"}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "maxLineByte", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase11": {"Description": "异常场景:修改Agent配置模板,清理历史文件cleanDeadTime参数错误", "isOperationDb": "", "req_body": {"cleanDeadTime": "abs"}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "cleanDeadTime", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase12": {"Description": "异常场景:修改Agent配置模板,清理历史文件cleanDeadTime参数为空", "isOperationDb": "", "req_body": {"cleanDeadTime": ""}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "cleanDeadTime", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase2": {"Description": "正常场景:修改Agent配置模板,修改模板日志路径为空", "isOperationDb": "", "req_body": {"paths": []}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "paths", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase2-1": {"Description": "正常场景:修改Agent配置模板,修改模板日志路径非法", "isOperationDb": "", "req_body": {"paths": [{"path": 1244, "type": "collect"}]}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "paths", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase3": {"Description": "异常场景:修改Agent配置模板,修改模板deadTime参数错误", "isOperationDb": "", "req_body": {"deadTime": "abc"}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "deadTime", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase4": {"Description": "异常场景:修改Agent配置模板,修改模板deadTime参数为空", "isOperationDb": "", "req_body": {"deadTime": ""}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "deadTime", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase5": {"Description": "异常场景:修改Agent配置模板,Agnet参数错误", "isOperationDb": "", "req_body": {"agent": "AR-Agent123"}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "agent", "value": false, "db": "AgentConfigTemplate,agent"}}, "TestCase5-1": {"Description": "异常场景:修改Agent配置模板,Agnet参数为空", "isOperationDb": "", "req_body": {"agent": ""}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "agent", "value": false, "db": "AgentConfigTemplate,agent"}}, "TestCase6": {"Description": "异常场景:修改Agent配置模板,标签参数tags错误", "isOperationDb": "", "req_body": {"tags": ["MySQL123"]}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "tags", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase6-1": {"Description": "异常场景:修改Agent配置模板,标签参数tagsID错误", "isOperationDb": "", "req_body": {"tagsID": [240]}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "tagsID", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase6-2": {"Description": "异常场景:修改Agent配置模板,标签参数tagsID为空", "isOperationDb": "", "req_body": {"tagsID": []}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "tagsID", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase6-3": {"Description": "异常场景:修改Agent配置模板,标签参数tags为空", "isOperationDb": "", "req_body": {"tags": []}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "tags", "value": false, "db": "AgentConfigTemplate,config"}}, "TestCase7": {"Description": "异常场景:修改Agent配置模板,模板名称已存在", "isOperationDb": "name", "req_body": "", "runflag": true, "verify": {"AssertType": 1, "key": "code", "value": 3760193553}}, "TestCase8": {"Description": "异常场景:修改Agent配置模板,配置类型参数category错误", "isOperationDb": "", "req_body": {"category": "input123"}, "runflag": true, "verify": {"AssertType": 4, "id": "${TemplateID}$", "key": "category", "value": false, "db": "AgentConfigTemplate,category"}}}}