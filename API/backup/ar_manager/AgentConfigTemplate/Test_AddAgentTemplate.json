{"model": "AgentConfigTemplate", "request": {"method": "post", "url_path": "/manager/agents/config/template"}, "server": "ar_manager", "story_description": "添加Agent配置模板", "switch": true, "body": {"agent": "AR-Agent", "category": "input", "config": {"cleanDeadEnable": true, "cleanDeadTime": 30, "deadTime": 24, "encoding": "GBK", "fields": "", "maxLineByte": 10240, "multiline": false, "multiline.match": "after", "multiline.negate": false, "multiline.pattern": "", "paths": [{"path": "/log", "type": "collect"}, {"path": "/test", "type": "collect"}], "tags": ["MongoDB", "SQLServer"], "tagsID": [5, 4], "tail": true, "type": "test"}, "description": "Apache日志文件采集的相关配置", "name": "Apache日志采集${AnyRobotNameID}$"}, "testcases": {"TestCase1": {"Description": "正常场景:创建Agent配置模板", "isOperationDb": "", "req_body": "", "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": true}}, "TestCase2": {"Description": "异常场景:创建Agent配置模板,参数cleanDeadTime为空", "isOperationDb": "", "req_body": {"cleanDeadTime": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase3": {"Description": "异常场景:创建Agent配置模板,参数cleanDeadTime非法", "isOperationDb": "", "req_body": {"cleanDeadTime": "abd"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase4": {"Description": "异常场景:创建Agent配置模板,参数deadTime为空", "isOperationDb": "", "req_body": {"deadTime": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase5": {"Description": "异常场景:创建Agent配置模板,参数deadTime不合法", "isOperationDb": "", "req_body": {"deadTime": "abdc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase13": {"Description": "异常场景:创建Agent配置模板,参数maxLineByte不合法", "isOperationDb": "", "req_body": {"maxLineByte": "abdc"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase14": {"Description": "异常场景:创建Agent配置模板,参数maxLineByte为空", "isOperationDb": "", "isParameter": "AnyRobotNameID", "req_body": {"maxLineByte": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase15": {"Description": "异常场景:创建Agent配置模板,日志路径参为空", "isOperationDb": "", "isParameter": "AnyRobotNameID", "req_body": {"paths": []}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase10": {"Description": "异常场景:创建Agent配置模板,日志路径参数非法路径", "isOperationDb": "", "isParameter": "AnyRobotNameID", "req_body": {"paths": [{"path": "log", "type": "collect"}]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase16": {"Description": "异常场景:创建Agent配置模板,tags标签测错误", "isOperationDb": "", "req_body": {"tags": ["MongoDBsbdv", "SQLServer"]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase17": {"Description": "异常场景:创建Agent配置模板,tagsID标签测错误", "isOperationDb": "", "isParameter": "AnyRobotNameID", "req_body": {"tagsID": [5, 42]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase18": {"Description": "异常场景:创建Agent配置模板,tags和tagsID不对应", "isOperationDb": "", "req_body": {"tagsID": [5, 1]}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase12": {"Description": "异常场景:创建Agent配置模板,agent参数类型错误", "isOperationDb": "", "req_body": {"agent": "AR-Agent123"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase11": {"Description": "异常场景:创建Agent配置模板,agent参数为空", "isOperationDb": "", "req_body": {"agent": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase6": {"Description": "异常场景:创建Agent配置模板,category参数错误", "isOperationDb": "", "req_body": {"category": "input12"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase7": {"Description": "异常场景:创建Agent配置模板,category参数为空", "isOperationDb": "", "req_body": {"category": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase8": {"Description": "异常场景:创建Agent配置模板,Agnet模板用户名相同", "isOperationDb": "name", "req_body": "", "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase20": {"Description": "异常场景:创建Agent配置模板,参数encoding非法", "isOperationDb": "name", "req_body": {"encoding": "GBK123445"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase21": {"Description": "异常场景:创建Agent配置模板,参数encoding为空", "isOperationDb": "name", "req_body": {"encoding": ""}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase22": {"Description": "异常场景:创建Agent配置模板,参数agent类型和请求参数不对应", "isOperationDb": "name", "req_body": {"agent": "Winlogbeat"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}, "TestCase23": {"Description": "异常场景:创建Agent配置模板,参数agent类型和请求参数不对应", "isOperationDb": "name", "req_body": {"agent": "Filebeat"}, "runflag": true, "verify": {"AssertType": 2, "key": "templateId", "value": false}}}}