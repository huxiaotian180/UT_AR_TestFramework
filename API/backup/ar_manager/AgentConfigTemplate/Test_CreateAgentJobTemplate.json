{"model": "AgentConfigTemplate", "request": {"header": {"user": "${UserID}$"}, "method": "post", "url_path": "/manager/agents/job/template"}, "server": "ar_manager", "story_description": "添加Agent任务模板", "switch": true, "body": {"agent": "AR-Agent", "category": "FileCollect", "configGroupIds": ["${GroupID}$"], "configHostIds": [], "configInputTemplateIds": ["${InputTemplateID}$"], "configOutputTemplateIds": ["${OutTemplateID}$"], "description": "AnyRobot服务器日志收集", "name": "AnyRobot服务器日志收集${AnyRobotNameID}$", "schedule": {"days": 1, "intervalTime": "23s", "period": "day", "startTime": "00:00", "type": "interval"}, "tags": ["Oracle", "MySQL"], "tagsID": [1, 2]}, "testcases": {"TestCase1": {"Description": "正常场景:添加Agent任务模板", "isOperationDb": "", "req_body": "", "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": true}}, "TestCase10": {"Description": "异常场景:添加Agent任务模板,configInputTemplateIds任务模板ID不存在", "isOperationDb": "", "req_body": {"configInputTemplateIds": "7788f9a2-a3ec-11ea-9b18-011111111117"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase11": {"Description": "异常场景:添加Agent任务模板,configInputTemplateIds任务模板为空", "isOperationDb": "", "req_body": {"configInputTemplateIds": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase12": {"Description": "异常场景:添加Agent任务模板,任务模板名称重复", "isOperationDb": "name", "req_body": "", "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase13": {"Description": "异常场景:添加Agent任务模板,注册标签tags使用信息错误", "isOperationDb": "", "req_body": {"tags": ["Oracle123", "MySQL123"]}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase14": {"Description": "异常场景:添加Agent任务模板,标签tagsID错误", "req_body": {"tagsID": [122, 222]}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase2": {"Description": "异常场景:添加Agent任务模板,标签参数tags为空", "req_body": {"tags": []}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase3": {"Description": "异常场景:添加Agent任务模板,标签参数tagsID为空", "req_body": {"tagsID": []}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase4": {"Description": "异常场景:添加Agent任务模板,标签参数intervalTime为空", "req_body": {"intervalTime": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase4-1": {"Description": "异常场景:添加Agent任务模板,标签参数intervalTime参数非法", "req_body": {"intervalTime": "abc"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase5": {"Description": "异常场景:添加Agent任务模板,标签参数configOutputTemplateIds不存在", "req_body": {"configOutputTemplateIds": "7788f9a2-a3ec-11ea-9b18-0242a1111117"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase6": {"Description": "异常场景:添加Agent任务模板,标签参数configOutputTemplateIds为空", "req_body": {"configOutputTemplateIds": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase7": {"Description": "异常场景:添加Agent任务模板,Agent参数错误", "req_body": {"agent": "AR-Agent123"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase7-1": {"Description": "异常场景:添加Agent任务模板,Agent参数为空", "req_body": {"agent": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase8": {"Description": "异常场景:添加Agent任务模板,category参数错误", "req_body": {"category": "abcd"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase9": {"Description": "异常场景:添加Agent任务模板,category参数为空", "req_body": {"category": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase15": {"Description": "异常场景:添加Agent任务模板,configGroupIds参数ID不存在", "req_body": {"configGroupIds": "771239a2-a3ec-11ea-9b18-0242a1111117"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase16": {"Description": "异常场景:添加Agent任务模板,configHostIds参数ID不存在", "req_body": {"configHostIds": "771239a2-a3ec-11ea-9b18-0242a1111117"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase17": {"Description": "异常场景:添加Agent任务模板,type参数不存在", "req_body": {"type": "abcd"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase18": {"Description": "异常场景:添加Agent任务模板,type参数为空", "req_body": {"type": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase19": {"Description": "异常场景:添加Agent任务模板,type参数为空", "req_body": {"type": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase20": {"Description": "异常场景:添加Agent任务模板,period参数为空", "req_body": {"period": ""}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase21": {"Description": "异常场景:添加Agent任务模板,period参数非法", "req_body": {"period": "abcd"}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase22": {"Description": "异常场景:添加Agent任务模板(固定时间),endTime参数数值超过时间格式", "req_body": {"schedule": {"days": 1, "endTime": "50:00", "intervalTime": "10s", "period": "day", "startTime": "02:00", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase23": {"Description": "异常场景:添加Agent任务模板(固定时间),endTime参数非法", "req_body": {"schedule": {"days": 1, "endTime": "abc", "intervalTime": "10s", "period": "day", "startTime": "02:00", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase24": {"Description": "异常场景:添加Agent任务模板(固定时间),startTime参数非法", "req_body": {"schedule": {"days": 1, "endTime": "02:00", "intervalTime": "10s", "period": "day", "startTime": "abc", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase25": {"Description": "异常场景:添加Agent任务模板(固定时间),startTime参数数值非法", "req_body": {"schedule": {"days": 1, "endTime": "02:00", "intervalTime": "10s", "period": "day", "startTime": "55:23", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase26": {"Description": "异常场景:添加Agent任务模板(固定时间),startTime时间晚于endtime时间", "req_body": {"schedule": {"days": 1, "endTime": "01:00", "intervalTime": "10s", "period": "day", "startTime": "02:00", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase27": {"Description": "正常场景:添加Agent任务模板(固定时间)模式", "req_body": {"schedule": {"days": 1, "endTime": "09:00", "intervalTime": "10s", "period": "day", "startTime": "02:00", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}, "TestCase28": {"Description": "正常场景:添加Agent任务模板(固定时间,周)模式", "req_body": {"schedule": {"days": 1, "endTime": "04:00", "intervalTime": "10s", "period": "week", "startTime": "02:00", "type": "timequantum"}}, "runflag": true, "verify": {"AssertType": 2, "id": "templateId", "value": false}}}}